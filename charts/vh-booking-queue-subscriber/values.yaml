---
java:
  image: 'sdshmctspublic.azurecr.io/vh/booking-queue-subscriber:latest'
  releaseNameOverride: vh-booking-queue-subscriber
  aadIdentityName: vh-aad-identity
  readinessPath: /health/liveness
  livenessPath: /health/liveness
  applicationPort: 8080
  keyVaults:
    vh-infra-core:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - azuread--tenantid
        - applicationinsights--instrumentationkey
        - name: servicebusqueue--connectionstring
          alias: servicebusconnection
    vh-booking-queue:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - azuread--clientid
        - azuread--clientsecret
        - vhservices--internaleventsecret
    vh-bookings-api:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - name: azuread--identifieruri
          alias: vhservices--bookingsapiresourceid
    vh-video-api:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - name: azuread--identifieruri
          alias: vhservices--videoapiresourceid
        - name: azuread--identifieruri
          alias: azuread--videoapiresourceid
    vh-video-web:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - name: azuread--identifieruri
          alias: vhservices--videowebresourceid
    vh-notification-api:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - name: azuread--identifieruri
          alias: vhservices--notificationapiresourceid
    vh-user-api:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - name: azuread--identifieruri
          alias: vhservices--userapiresourceid
    vh-admin-web:
      excludeEnvironmentSuffix: false
      resourceGroup: vh-infra-core-{{ .Values.global.environment }}
      usePodIdentity: true
      secrets:
        - name: FeatureToggles--SDK-Key
          alias: FeatureToggle--SdkKey
  environment:
    ASPNETCORE_URLS: http://+:8080
    AZUREAD__AUTHORITY: https://login.microsoftonline.com/
    Logging__LogLevel__Default: debug
    Logging__LogLevel__Microsoft: debug
    Logging__LogLevel__System: debug
    QUEUENAME: booking
    VHSERVICES__BOOKINGSAPIURL: https://vh-bookings-api.{{ .Values.global.environment }}.platform.hmcts.net/
    VHSERVICES__ENABLEVIDEOAPISTUB: false
    VHSERVICES__NOTIFICATIONAPIURL: https://vh-notification-api.{{ .Values.global.environment }}.platform.hmcts.net/
    VHSERVICES__VIDEOAPIURL: https://vh-video-api.{{ .Values.global.environment }}.platform.hmcts.net/
    VHSERVICES__VIDEOWEBURL: https://vh-video-web.{{ .Values.global.environment }}.platform.hmcts.net/
    VHSERVICES__USERAPIURL: https://vh-user-api.{{ .Values.global.environment }}.platform.hmcts.net/
function:
  releaseNameOverride: vh-booking-queue-subscriber
  scaleType: Object
  object: 
    apiVersion: apps/v1
    kind: Deployment
    name: vh-booking-queue-subscriber
    pollingInterval: 30
    cooldownPeriod: 90
    idleReplicaCount: 0
    maxReplicaCount: 1
    minReplicaCount: 0
  triggerAuth:
    create: true
    enabled: true
    triggerPodIdentityProvider: azure
  triggers: []
  
